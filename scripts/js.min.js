function scrollToLink(e){var t=e.href,r=t.split("#");$("html,body").animate({scrollTop:$("#"+r[1]).offset().top},900)}function getQueryVariable(e){for(var t=window.location.search.substring(1),r=t.split("&"),n=0;n<r.length;n++){var i=r[n].split("=");if(i[0]===e)return i[1]}return!1}function derrickPresentAndLoggedIn(){var e=!1;return"undefined"!=typeof derrick&&derrick.Derrick.prototype.hasProfile()&&(e=!0),e}function doParallaxCalc(e,t){var r=e.offset().top,n=$(window).scrollTop(),i=$(window).height(),o=r-i;$(".bg-image").css("transform","translateY("+n/20*10+"px)")}window.Modernizr=function(e,t,r){function n(e){m.cssText=e}function i(e,t){return n(prefixes.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var n in e){var i=e[n];if(!s(i,"-")&&m[i]!==r)return"pfx"!=t||i}return!1}function l(e,t,n){for(var i in e){var s=t[e[i]];if(s!==r)return!1===n?e[i]:o(s,"function")?s.bind(n||t):s}return!1}function c(e,t,r){var n=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+_.join(n+" ")+n).split(" ");return o(t,"string")||o(t,"undefined")?a(i,t):(i=(e+" "+w.join(n+" ")+n).split(" "),l(i,t,r))}var p="2.6.2",d={},f=t.documentElement,h="modernizr",u=t.createElement(h),m=u.style,v,g={}.toString,y="Webkit Moz O ms",_=y.split(" "),w=y.toLowerCase().split(" "),b={},k={},F={},E=[],j=E.slice,O,C={}.hasOwnProperty,x;x=o(C,"undefined")||o(C.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return C.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var r=j.call(arguments,1),n=function(){if(this instanceof n){var i=function(){};i.prototype=t.prototype;var o=new i,s=t.apply(o,r.concat(j.call(arguments)));return Object(s)===s?s:o}return t.apply(e,r.concat(j.call(arguments)))};return n}),b.csstransforms=function(){return!!c("transform")};for(var D in b)x(b,D)&&(O=D.toLowerCase(),d[O]=b[D](),E.push((d[O]?"":"no-")+O));return d.addTest=function(e,t){if("object"==typeof e)for(var n in e)x(e,n)&&d.addTest(n,e[n]);else{if(e=e.toLowerCase(),d[e]!==r)return d;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(f.className+=" "+(t?"":"no-")+e),d[e]=t}return d},n(""),u=v=null,d._version=p,d._domPrefixes=w,d._cssomPrefixes=_,d.testProp=function(e){return a([e])},d.testAllProps=c,d}(this,this.document),function(e,t,r){function n(e){return"[object Function]"==u.call(e)}function i(e){return"string"==typeof e}function o(){}function s(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function a(){var e=m.shift();v=1,e?e.t?f(function(){("c"==e.t?C.injectCss:C.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),a()):v=0}function l(e,r,n,i,o,l,c){function p(t){if(!u&&s(d.readyState)&&(w.r=u=1,!v&&a(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&f(function(){_.removeChild(d)},50);for(var n in E[r])E[r].hasOwnProperty(n)&&E[r][n].onload()}}var c=c||C.errorTimeout,d=t.createElement(e),u=0,g=0,w={t:n,s:r,e:o,a:l,x:c};1===E[r]&&(g=1,E[r]=[]),"object"==e?d.data=r:(d.src=r,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){p.call(this,g)},m.splice(i,0,w),"img"!=e&&(g||2===E[r]?(_.insertBefore(d,y?null:h),f(p,c)):E[r].push(d))}function c(e,t,r,n,o){return v=0,t=t||"j",i(e)?l("c"==t?b:w,e,t,this.i++,r,n,o):(m.splice(this.i++,0,e),1==m.length&&a()),this}function p(){var e=C;return e.loader={load:c,i:0},e}var d=t.documentElement,f=e.setTimeout,h=t.getElementsByTagName("script")[0],u={}.toString,m=[],v=0,g="MozAppearance"in d.style,y=g&&!!t.createRange().compareNode,_=y?d:h.parentNode,d=e.opera&&"[object Opera]"==u.call(e.opera),d=!!t.attachEvent&&!d,w=g?"object":d?"script":"img",b=d?"script":w,k=Array.isArray||function(e){return"[object Array]"==u.call(e)},F=[],E={},j={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},O,C;C=function(e){function t(e){var e=e.split("!"),t=F.length,r=e.pop(),n=e.length,r={url:r,origUrl:r,prefixes:e},i,o,s;for(o=0;o<n;o++)s=e[o].split("="),(i=j[s.shift()])&&(r=i(r,s));for(o=0;o<t;o++)r=F[o](r);return r}function s(e,i,o,s,a){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(i&&(i=n(i)?i:i[e]||i[s]||i[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,i,o,s,a):(E[l.url]?l.noexec=!0:E[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":r,l.noexec,l.attrs,l.timeout),(n(i)||n(c))&&o.load(function(){p(),i&&i(l.origUrl,a,s),c&&c(l.origUrl,a,s),E[l.url]=2})))}function a(e,t){function r(e,r){if(e){if(i(e))r||(c=function(){var e=[].slice.call(arguments);p.apply(this,e),d()}),s(e,c,t,0,a);else if(Object(e)===e)for(h in f=function(){var t=0,r;for(r in e)e.hasOwnProperty(r)&&t++;return t}(),e)e.hasOwnProperty(h)&&(!r&&!--f&&(n(c)?c=function(){var e=[].slice.call(arguments);p.apply(this,e),d()}:c[h]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),d()}}(p[h])),s(e[h],c,t,h,a))}else!r&&d()}var a=!!e.test,l=e.load||e.both,c=e.callback||o,p=c,d=e.complete||o,f,h;r(a?e.yep:e.nope,!!l),l&&r(l)}var l,c,d=this.yepnope.loader;if(i(e))s(e,0,d,0);else if(k(e))for(l=0;l<e.length;l++)c=e[l],i(c)?s(c,0,d,0):k(c)?C(c):Object(c)===c&&a(c,d);else Object(e)===e&&a(e,d)},C.addPrefix=function(e,t){j[e]=t},C.addFilter=function(e){F.push(e)},C.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",O=function(){t.removeEventListener("DOMContentLoaded",O,0),t.readyState="complete"},0)),e.yepnope=p(),e.yepnope.executeStack=a,e.yepnope.injectJs=function(e,r,n,i,l,c){var p=t.createElement("script"),d,u,i=i||C.errorTimeout;p.src=e;for(u in n)p.setAttribute(u,n[u]);r=c?a:r||o,p.onreadystatechange=p.onload=function(){!d&&s(p.readyState)&&(d=1,r(),p.onload=p.onreadystatechange=null)},f(function(){d||(d=1,r(1))},i),l?p.onload():h.parentNode.insertBefore(p,h)},e.yepnope.injectCss=function(e,r,n,i,s,l){var i=t.createElement("link"),c,r=l?a:r||o;i.href=e,i.rel="stylesheet",i.type="text/css";for(c in n)i.setAttribute(c,n[c]);s||(h.parentNode.insertBefore(i,h),f(r,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},$(".no-js").removeClass("no-js").addClass("js"),$("body").find("a.scroll").click(function(e){e.preventDefault(),scrollToLink(this)}),$(document).ready(function(){var e=$(window),t=function(t){var r=e.scrollTop(),n=e.scrollTop()+e.height();$(".bubblewrap").each(function(){var e=$(this),t=e.offset().top,i=t+e.height(),o=e.height()/2;topOnScreen=t>=r&&t<=n,console.log(i),console.log(n),i<=n+o&&e.addClass("animation")})},r=e.width();r>1024&&doParallaxCalc($(".bg-image"),1),r>810&&t(),$(document).scroll(function(){window.requestAnimationFrame(function(){r>1024&&doParallaxCalc($(".bg-image"),1),r>810&&t()})})}),function(){function e(e,t,r){this.$form=e,this.$form_wrapper=t||$("body").find("#form-wrapper"),this.$form_container=r||this.$form_wrapper.find("#form-container"),this.$userDetails=this.$form_container.find("#user-details"),this.$questionSection=this.$form_container.find("#question"),this.$inputs=this.$form.find("input"),this.errors=[],this.formID=this.$form.find("#formID").val(),this.$answerLengthFields=this.$form.find(".answer-length")||!1,this.derrickFailed=!1,this._attachEvents(),this.$form.prepend('<input type="hidden" id="js" name="js" value="1" />'),this._addJS()}function t(t,r,n){var i=new e(t,r,n);"function"!=typeof derrickInstance&&(i.derrickFailed=!0),window.competitionForm=i}e.prototype._attachEvents=function(){if(this.$form.on("submit",this._onSubmit.bind(this)),this.$userDetails.on("change","input[type=checkbox], input[type=radio]",this._checkValRemoveError.bind(this)),this.$questionSection.on("change","input[type=checkbox], input[type=radio]",this._checkValRemoveError.bind(this)),this.$questionSection.on("keyup","input, textarea",this._checkValRemoveError.bind(this)),this.$userDetails.on("keyup","input, textarea",this._checkValRemoveError.bind(this)),this.$answerLengthFields){var e=this;this.$answerLengthFields.each(function(){e._initAnswerLength(this)})}},e.prototype._checkValRemoveError=function(e){var t=this.$form.find("#"+e.target.id);t.val().length>0&&this._removeError(t)},e.prototype._onSubmit=function(e){if(derrickPresentAndLoggedIn()||this.derrickFailed){e.preventDefault();var t=this;$.ajax({type:"POST",url:"includes/form.validator.php",data:this.$form.serialize(),cache:!1,success:function(e){e.length&&t._checkForm(e)}})}},e.prototype._checkForm=function(e){return e=JSON.parse(e),!0===e.submitted?void this._showThankYou():!0===e.fileupload?(this.$form.find("input#js").remove(),void this.$form.submit()):(this._addJS(),this._resetPHP(),this.errors=e,void this._showErrors())},e.prototype._showThankYou=function(){var e=getQueryVariable("preview"),t=this;this.$form_wrapper.width(this.$form_wrapper.outerWidth()).height(this.$form_wrapper.outerHeight()),this.$form_wrapper.append('<div id="result" class="result" />');var r=this.$form_wrapper.find("#result");r.hide(),r.load("includes/templ.success.php?formID="+this.formID+(e?"&preview="+e:""),function(){t.$form_container.fadeOut(1200,function(){$(this).remove(),t.$form_wrapper.addClass("thank-you"),r.fadeIn(1200),$("html, body").animate({scrollTop:t.$form_wrapper.offset().top-70},900)})})},e.prototype._addJS=function(){var e=$("input[name="+j_+"]"),t=this.$inputs.length-1,r=Math.floor(Math.random()*t),n=this.$form.find("input:eq("+r+")");e.length&&e.remove(),$.ajax({type:"GET",url:"includes/inc.js.php",cache:!1,data:{formID:this.formID},success:function(e){e.length&&$('<input type="hidden" name="'+j_+'" value="'+e+'" />').insertBefore(n)}})},e.prototype._resetPHP=function(){$.ajax({type:"GET",url:"includes/inc.reset.php",cache:!1,data:{formID:this.formID},success:function(e){e.length&&$("input[name="+t_+"]").val(e)}})},e.prototype.populateForm=function(e){var t=e.dob.split("-"),r=t[2],n=t[1],i=t[0],o=r>0&&n>0&&i>1900,s="M"===e.gender?"M-Mr":"F-Ms";this._populateAndReplaceField("firstName",e.first_name),this._populateAndReplaceField("surname",e.last_name),this._populateAndReplaceField("email",e.email),this._populateAndReplaceField("postCode",e.postcode),this._populateAndReplaceField("phone",e.phone),this._populateAndReplaceField("dateOfBirth_day",r),this._populateAndReplaceField("dateOfBirth_month",n),this._populateAndReplaceField("dateOfBirth_year",i),this._populateAndReplaceField("gender",s,"select"),e.global_comms&&(this.$form.find('input[name="stationOptIn"]').prop("checked",!0),this.$form.find('input[name="stationOptIn"], label[for="stationOptIn"]').hide()),o&&this.$userDetails.find("#field-container-dateOfBirth").hide()},e.prototype._populateAndReplaceField=function(e,t,r){if(t.length){var n=e+"_inactive",i=e+"_dummy",o="#field-container-"+e,s=this.$userDetails.find('*[name="'+e+'"]');s.hide().attr({name:n,disabled:!0}),$("#"+i).length||($('<span class="dummy" id="'+e+'_dummy">'+t+"</span>").insertBefore(s),$('<input type="hidden" id="'+e+'_substitute" value="'+t+'" name="'+e+'"/>').insertBefore(s)),this.$userDetails.find(o).hide()}},e.prototype._resetField=function(e){var t=this.$userDetails.find("#"+e+"_substitute"),r="#field-container-"+e;t.length?(t.remove(),this.$userDetails.find("#"+e+"_dummy").remove(),this.$userDetails.find('*[name="'+e+'_inactive"]').show().attr({name:e,disabled:!1}),this.$userDetails.find(r).show()):this.$userDetails.find('*[name="'+e+'"]').val("")},e.prototype.clearForm=function(){this._resetField("firstName"),this._resetField("surname"),this._resetField("email"),this._resetField("postCode"),this._resetField("phone"),this._resetField("dateOfBirth_day"),this._resetField("dateOfBirth_month"),this._resetField("dateOfBirth_year"),this._resetField("gender"),this.$userDetails.find("#field-container-dateOfBirth").show()},e.prototype.authenticated=function(e){this.$userDetails.show(),this.populateForm(e),this._triggerSC(e)},e.prototype.notAuthenticated=function(){this.$userDetails.hide(),this.clearForm()},e.prototype.setDerrickFlag=function(e){this.derrickFailed=!1!==e},e.prototype._showErrors=function(){for(var e in this.errors)this.errors.hasOwnProperty(e)&&this.showError(e,this.errors[e]);$("html,body").animate({scrollTop:$(".error").first().offset().top},900)},e.prototype._getErrorElement=function(e){var t=this.$form.find('label[for="'+e+'"]');return t.length||(t=this.$form.find("#"+e)),!!t.length&&t},e.prototype.showError=function(e,t){void 0===t&&(t=this.errors[e]);var r=this._getErrorElement(e);if(!r.length&&"general"!==e)return void console.log("WARNING: can't find parent for "+e);if(2===this.errors.length&&"general"===e&&(this.$form[0].reset(),this._resetPHP()),this.$form.find(".error."+e).length){if(this.$form.find(".error."+e).html()===t)return;this.$form.find(".error."+e).hide("normal").remove()}if("general"===e)return this.$form.find("fieldset").first().prepend('<p class="error '+e+'">'+t+"</p>"),void $("p."+e).hide().show("slow");r.closest(".nested").length&&(r=r.closest(".nested").parent());var n=r.get(0).nodeName.toLowerCase(),i=r.parent(),o=i.get(0).nodeName.toLowerCase(),s=n,a=r;switch(n){case"label":s=o,a=i;break;case"input":"dd"===o&&(o="dt"),s=o,a=i;break;case"dd":r.prev().is("dt")&&(r=r.prev(),s="dt");break;case"ul":case"p":case"dt":case"li":break}var l=document.createElement(s);l.className="error "+e,l.innerHTML=t,$(l).insertBefore(a).hide().show("slow")},e.prototype._removeError=function(e){var t,r=e.attr("id");e.is(":radio")&&(r=e.attr("name")),r.split("_").length>1&&(r=r.split("_")[0]),t=".error."+r,"stationOptIn"!==r&&"clientOptIn"!==r||(t=".error.email, .error.postCode"),this.$form.find(t).hide("normal",function(){$(this).remove()})},e.prototype.removeAllErrors=function(){this.$form.find(".error").hide("normal",function(){$(this).remove()})},e.prototype._initAnswerLength=function(e){var t=$(e),r=$("#"+t.data("target")),n=parseInt(t.find("span").text()),i="words"===t.attr("data-type")?"words":"characters";t.html("<span></span> "+i+" left"),0===r.val().length&&t.find("span").text(n),r.keyup(function(){var e="characters"===i?$(this).val().length:r.val().trim().replace(/\s+/gi," ").split(" ").length,o=n-e,s="";o<0?s="less-than-0":o<30&&(s="less-than-30"),t.addClass(s).find("span").text(o),r.addClass(s).find("span").text(o)})},e.prototype._triggerSC=function(e){var t=[],r="",n=e?"signed_in":"not_signed_in",i="",o=e?e.id:"not_signed_in",a=["prop18","prop46","eVar18","eVar20","prop20","eVar50","events"];if(e.login_event){switch(e.login_event){case"emailRegister":t.push("event3","event9"),r="register";break;case"emailSignIn":t.push("event9"),r="sign_in";break;case"socialSignIn":t.push("event9"),r="sign_in";break}i="MKT:EXT:"+r}s.prop18=n,s.eVar18=n,s.prop46=o,s.eVar50=o,s.eVar20=i,s.eProp20=i,s.events=t.join(","),s.linkTrackVars=a.join(","),s.linkTrackEvents=t.join(","),s.tl(!0,"o","Commercial Microsite")},window.initForm=t}();